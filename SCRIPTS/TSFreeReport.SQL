REM	A summary report of Tablespace Freespace and Usage 


SET ECHO OFF
SPOOL rep_out\TSFreeReport.LIST
TTITLE CENTER '$ORACLE_SID DATABASE -- Tablespace Summary and Freespace Report'
SKIP 2
SET NEWPAGE 0
COLUMN TABLESPACE_NAME FORMAT A21
COLUMN SUM(BYTES/1024*1024) FORMAT 999,999,999,999
SELECT TABLESPACE_NAME, SUM(BYTES/1024*1024) FROM DBA_SEGMENTS
GROUP BY TABLESPACE_NAME;
COLUMN SUM(BYTES/1024*1024) FORMAT 999,999,999,999
COLUMN SUM(BYTES/1024*1024) HEADING TOTAL_SIZE_IN_MegaBytes
COLUMN TABLESPACE_NAME FORMAT A21
BREAK ON TABLESPACE_NAME SKIP 1 ON REPORT
SELECT TABLESPACE_NAME, SUM(BYTES/1024*1024) FROM DBA_SEGMENTS
GROUP BY TABLESPACE_NAME;
COLUMN SUM(BYTES/1024*1024) FORMAT 999,999,999,999
COLUMN MAX(BYTES/1024*1024) FORMAT 999,999,999,999
COLUMN SUM(BYTES/1024*1024) HEADING TOTAL_FREE_SPACE_IN_MegaBytes
COLUMN MAX(BYTES) HEADING LARGEST_FREE_SPACE
COLUMN TABLESPACE_NAME FORMAT A21
SELECT TABLESPACE_NAME, SUM(BYTES/1024*1024), MAX(BYTES)
FROM SYS.DBA_FREE_SPACE GROUP BY TABLESPACE_NAME;

SPOOL OFF;
